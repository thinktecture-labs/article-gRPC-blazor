@using GrpcToDo.Shared.DTOs
@inject GrpcToDo.Web.Services.ToDoService _service

 <div class="mat-elevation-z5 td-card @(Item.Status ? "checked" : "")">
    <p>@Item.Title</p>
    <div class="module fade">
        <span>@Item.Description</span>
    </div>
    <div class="actions">
        @if (!Item.Status) {
            <MatIconButton Icon="@MatIconNames.Done" @onclick="@(e => UpdateTaskAsync(Item))"></MatIconButton>
        }
        <MatIconButton Icon="@MatIconNames.Delete" @onclick="@(e => DeleteTask(Item.Id))"></MatIconButton>
    </div>
</div>
@code {
    [Parameter]
    public ToDoData Item { get; set; }

    [Parameter] 
    public EventCallback<bool> ToDoItemChanged { get; set; }

    protected async Task UpdateTaskAsync(ToDoData data) 
    {
        data.Status = true;
        await _service.UpdateToDoData(data);
        await ToDoItemChanged.InvokeAsync(true);
    }

    protected async Task DeleteTask(int id) 
    {
        await _service.DeleteDataAsync(id.ToString());
        await ToDoItemChanged.InvokeAsync(true);
    }
}